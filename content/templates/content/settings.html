{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-9">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-dark text-white rounded-top-4">
          <h3 class="mb-0"><i class="bi bi-gear-fill"></i> Account Settings</h3>
        </div>
        <div class="card-body p-4">
          
          <!-- Tabs -->
          <ul class="nav nav-tabs mb-4" id="settingsTabs" role="tablist">
            <li class="nav-item">
              <button class="nav-link active" id="profile-tab" data-bs-toggle="tab"
                      data-bs-target="#profile" type="button" role="tab">
                <i class="bi bi-person-circle"></i> Profile
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" id="account-tab" data-bs-toggle="tab"
                      data-bs-target="#account" type="button" role="tab">
                <i class="bi bi-person-badge"></i> Account
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" id="privacy-tab" data-bs-toggle="tab"
                      data-bs-target="#privacy" type="button" role="tab">
                <i class="bi bi-shield-lock"></i> Privacy & Security
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link text-danger" id="danger-tab" data-bs-toggle="tab"
                      data-bs-target="#danger" type="button" role="tab">
                <i class="bi bi-exclamation-triangle"></i> Danger Zone
              </button>
            </li>
          </ul>

          <!-- Tab Content -->
          <div class="tab-content" id="settingsTabsContent">

            <!-- Profile Settings -->
            <div class="tab-pane fade show active" id="profile" role="tabpanel">
              <h5 class="fw-bold mb-3">Update Profile</h5>
              <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-save"></i> Save Profile
                </button>
              </form>
            </div>

            <!-- Account Settings -->
            <div class="tab-pane fade" id="account" role="tabpanel">
              <h5 class="fw-bold mb-3">Account Settings</h5>
              <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="bi bi-key"></i> Change Password</span>
                  <a href="{% url 'account_change_password' %}" class="btn btn-sm btn-outline-primary">Update</a>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="bi bi-envelope"></i> Update Email</span>
                  <a href="{% url 'account_email' %}" class="btn btn-sm btn-outline-primary">Edit</a>
                </li>
              </ul>
            </div>

            <!-- Privacy & Security -->
            <div class="tab-pane fade" id="privacy" role="tabpanel">
              <h5 class="fw-bold mb-3">Privacy & Notifications</h5>
              <form>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="newsletter" checked>
                  <label class="form-check-label" for="newsletter">
                    Receive newsletters & updates
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" id="loginAlerts">
                  <label class="form-check-label" for="loginAlerts">
                    Notify me on new logins
                  </label>
                </div>
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-shield-check"></i> Save Preferences
                </button>
              </form>
            </div>

            <!-- Danger Zone -->
            <div class="tab-pane fade" id="danger" role="tabpanel">
              <h5 class="fw-bold text-danger mb-3">Danger Zone</h5>
              <p class="text-muted">Once you delete your account, there is no going back. Please be certain.</p>
              <a href="{% url 'delete_account' %}" class="btn btn-danger">
                <i class="bi bi-trash"></i> Delete My Account
              </a>
            </div>

          </div> <!-- End Tab Content -->
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
